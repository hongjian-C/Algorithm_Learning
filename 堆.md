# 堆

## 堆的概念

1. 堆是完全二叉树：除了最后一层，其它层的节点个数都是满的，最后一层都靠左排列
2. 堆的每个节点都大于等于（或小于等于）其左右子节点的值



大于等于：大顶堆

小于等于：小顶堆



## 如何实现一个堆

### 如何储存一个堆

完全二叉树比较适合用数组来存储。用数组来存储完全二叉树是非常节省存储空间的。

![img](https://static001.geekbang.org/resource/image/4d/1e/4d349f57947df6590a2dd1364c3b0b1e.jpg?wh=1142*540)

组中下标为 i 的节点的左子节点，就是下标为 i∗2 的节点，右子节点就是下标为 i∗2+1 的节点，父节点就是下标为 2/i 的节点。



### 堆上的操作

#### 1. 在堆中插入一个元素

**堆化**

先插入堆底，顺着节点所在的路径，向上或者向下，对比，然后交换

![img](https://static001.geekbang.org/resource/image/e3/0e/e3744661e038e4ae570316bc862b2c0e.jpg?wh=1142*776)

#### 2. 删除堆顶元素

我们把最后一个节点放到堆顶，然后利用同样的父子节点对比方法。对于不满足父子节点大小关系的，互换两个节点，并且重复进行这个过程，直到父子节点之间满足大小关系为止。这就是从上往下的堆化方法。

![img](https://static001.geekbang.org/resource/image/11/60/110d6f442e718f86d2a1d16095513260.jpg?wh=1142*856)



## 如何基于堆实现排序



时间复杂度：O(nlogn)

原地排序算法

两个步骤：**建堆**，**排序**

